var Ms=Object.defineProperty;var qs=(e,t,r)=>t in e?Ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ct=(e,t,r)=>qs(e,typeof t!="symbol"?t+"":t,r);import{i as Me,o as Hs,s as Ws,L as at,j as s,M as Vs,R as Js,a as Ks,S as N,B as Qt,b as Fe,D as Ys,A as Zt,c as re,d as Gs,e as Xs,f as es,g as it,h as Qs,C as O,F as k,I as D,k as pe,l as T,m as I,n as Ue,p as G,q as ae,r as ge,t as lt,u as ce,T as F,v as ye,w as ts,x as de,E as kt,y as Zs,z as er,G as ct,H as Rt,J as ze,K as te,N as pt,P as yt,O as ss,Q as rs,U as V,V as ns,W as os,X as as,Y as Et,Z as is,_ as ne,$ as Oe,a0 as tr,a1 as be,a2 as Ie,a3 as st,a4 as sr,a5 as rr}from"./antd-vendor-CSEkOqTv.js";import{c as nr,g as ls,r as _,R as cs,u as fe,f as or,O as ar,h as ir,i as lr,j as W,N as Ne,B as cr}from"./react-vendor-D02_Oe2u.js";import{E as At}from"./chart-vendor-BZFGcw96.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var dt={},Pt=nr;dt.createRoot=Pt.createRoot,dt.hydrateRoot=Pt.hydrateRoot;var qe={},He={};Object.defineProperty(He,"__esModule",{value:!0});He.default=void 0;var dr={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};He.default=dr;var We={},_e={},Ve={},Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.commonLocale=void 0;Je.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0};var ur=Me.default;Object.defineProperty(Ve,"__esModule",{value:!0});Ve.default=void 0;var It=ur(Hs),fr=Je,hr=(0,It.default)((0,It.default)({},fr.commonLocale),{},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",week:"周",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪",yearFormat:"YYYY年",cellDateFormat:"D",monthBeforeYear:!1});Ve.default=hr;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.default=void 0;const mr={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};Ce.default=mr;var ds=Me.default;Object.defineProperty(_e,"__esModule",{value:!0});_e.default=void 0;var pr=ds(Ve),yr=ds(Ce);const us={lang:Object.assign({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},pr.default),timePickerLocale:Object.assign({},yr.default)};us.lang.ok="确定";_e.default=us;var gr=Me.default;Object.defineProperty(We,"__esModule",{value:!0});We.default=void 0;var xr=gr(_e);We.default=xr.default;var Ke=Me.default;Object.defineProperty(qe,"__esModule",{value:!0});qe.default=void 0;var wr=Ke(He),jr=Ke(We),br=Ke(_e),Sr=Ke(Ce);const H="${label}不是一个有效的${type}",vr={locale:"zh-cn",Pagination:wr.default,DatePicker:br.default,TimePicker:Sr.default,Calendar:jr.default,global:{placeholder:"请选择",close:"关闭"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckAll:"全选",filterSearchPlaceholder:"在筛选项中搜索",emptyText:"暂无数据",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Tour:{Next:"下一步",Previous:"上一步",Finish:"结束导览"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",deselectAll:"取消全选",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开",collapse:"收起"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:H,method:H,array:H,object:H,number:H,date:H,boolean:H,integer:H,float:H,regexp:H,email:H,url:H,hex:H},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"},QRCode:{expired:"二维码过期",refresh:"点击刷新",scanned:"已扫描"},ColorPicker:{presetEmpty:"暂无",transparent:"无色",singleColor:"单色",gradientColor:"渐变色"}};qe.default=vr;var _r=qe;const Cr=ls(_r),kr={},Tt=e=>{let t;const r=new Set,n=(d,h)=>{const w=typeof d=="function"?d(t):d;if(!Object.is(w,t)){const R=t;t=h??(typeof w!="object"||w===null)?w:Object.assign({},t,w),r.forEach(f=>f(t,R))}},o=()=>t,p={setState:n,getState:o,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(kr?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,o,p);return p},Rr=e=>e?Tt(e):Tt;var fs={exports:{}},hs={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ye=_,Er=Ws;function Ar(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pr=typeof Object.is=="function"?Object.is:Ar,Ir=Er.useSyncExternalStore,Tr=Ye.useRef,Or=Ye.useEffect,Nr=Ye.useMemo,Lr=Ye.useDebugValue;hs.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var i=Tr(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=Nr(function(){function p(R){if(!u){if(u=!0,d=R,R=n(R),o!==void 0&&a.hasValue){var f=a.value;if(o(f,R))return h=f}return h=R}if(f=h,Pr(d,R))return f;var x=n(R);return o!==void 0&&o(f,x)?(d=R,f):(d=R,h=x)}var u=!1,d,h,w=r===void 0?null:r;return[function(){return p(t())},w===null?void 0:function(){return p(w())}]},[t,r,n,o]);var l=Ir(e,i[0],i[1]);return Or(function(){a.hasValue=!0,a.value=l},[l]),Lr(l),l};fs.exports=hs;var $r=fs.exports;const Dr=ls($r),ms={},{useDebugValue:Fr}=cs,{useSyncExternalStoreWithSelector:Ur}=Dr;let Ot=!1;const zr=e=>e;function Br(e,t=zr,r){(ms?"production":void 0)!=="production"&&r&&!Ot&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ot=!0);const n=Ur(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Fr(n),n}const Nt=e=>{(ms?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Rr(e):e,r=(n,o)=>Br(t,n,o);return Object.assign(r,t),r},Mr=e=>e?Nt(e):Nt,he=Mr(e=>({user:null,token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),setUser:t=>e({user:t,isAuthenticated:!!t}),setToken:t=>{t?localStorage.setItem("token",t):localStorage.removeItem("token"),e({token:t,isAuthenticated:!!t})},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),e({user:null,token:null,isAuthenticated:!1})},nodes:[],selectedNode:null,setNodes:t=>e({nodes:t}),setSelectedNode:t=>e({selectedNode:t}),systemStats:null,setSystemStats:t=>e({systemStats:t}),sidebarCollapsed:!1,toggleSidebar:()=>e(t=>({sidebarCollapsed:!t.sidebarCollapsed}))}));function ps(e,t){return function(){return e.apply(t,arguments)}}const{toString:qr}=Object.prototype,{getPrototypeOf:gt}=Object,{iterator:Ge,toStringTag:ys}=Symbol,Xe=(e=>t=>{const r=qr.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),J=e=>(e=e.toLowerCase(),t=>Xe(t)===e),Qe=e=>t=>typeof t===e,{isArray:we}=Array,xe=Qe("undefined");function ke(e){return e!==null&&!xe(e)&&e.constructor!==null&&!xe(e.constructor)&&B(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gs=J("ArrayBuffer");function Hr(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&gs(e.buffer),t}const Wr=Qe("string"),B=Qe("function"),xs=Qe("number"),Re=e=>e!==null&&typeof e=="object",Vr=e=>e===!0||e===!1,Le=e=>{if(Xe(e)!=="object")return!1;const t=gt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ys in e)&&!(Ge in e)},Jr=e=>{if(!Re(e)||ke(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Kr=J("Date"),Yr=J("File"),Gr=J("Blob"),Xr=J("FileList"),Qr=e=>Re(e)&&B(e.pipe),Zr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||B(e.append)&&((t=Xe(e))==="formdata"||t==="object"&&B(e.toString)&&e.toString()==="[object FormData]"))},en=J("URLSearchParams"),[tn,sn,rn,nn]=["ReadableStream","Request","Response","Headers"].map(J),on=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ee(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,o;if(typeof e!="object"&&(e=[e]),we(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{if(ke(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let l;for(n=0;n<a;n++)l=i[n],t.call(null,e[l],l,e)}}function ws(e,t){if(ke(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,o;for(;n-- >0;)if(o=r[n],t===o.toLowerCase())return o;return null}const ie=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,js=e=>!xe(e)&&e!==ie;function ut(){const{caseless:e,skipUndefined:t}=js(this)&&this||{},r={},n=(o,i)=>{const a=e&&ws(r,i)||i;Le(r[a])&&Le(o)?r[a]=ut(r[a],o):Le(o)?r[a]=ut({},o):we(o)?r[a]=o.slice():(!t||!xe(o))&&(r[a]=o)};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&Ee(arguments[o],n);return r}const an=(e,t,r,{allOwnKeys:n}={})=>(Ee(t,(o,i)=>{r&&B(o)?e[i]=ps(o,r):e[i]=o},{allOwnKeys:n}),e),ln=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),cn=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},dn=(e,t,r,n)=>{let o,i,a;const l={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],(!n||n(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=r!==!1&&gt(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},un=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},fn=e=>{if(!e)return null;if(we(e))return e;let t=e.length;if(!xs(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},hn=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&gt(Uint8Array)),mn=(e,t)=>{const n=(e&&e[Ge]).call(e);let o;for(;(o=n.next())&&!o.done;){const i=o.value;t.call(e,i[0],i[1])}},pn=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},yn=J("HTMLFormElement"),gn=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,o){return n.toUpperCase()+o}),Lt=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),xn=J("RegExp"),bs=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Ee(r,(o,i)=>{let a;(a=t(o,i,e))!==!1&&(n[i]=a||o)}),Object.defineProperties(e,n)},wn=e=>{bs(e,(t,r)=>{if(B(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(B(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},jn=(e,t)=>{const r={},n=o=>{o.forEach(i=>{r[i]=!0})};return we(e)?n(e):n(String(e).split(t)),r},bn=()=>{},Sn=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function vn(e){return!!(e&&B(e.append)&&e[ys]==="FormData"&&e[Ge])}const _n=e=>{const t=new Array(10),r=(n,o)=>{if(Re(n)){if(t.indexOf(n)>=0)return;if(ke(n))return n;if(!("toJSON"in n)){t[o]=n;const i=we(n)?[]:{};return Ee(n,(a,l)=>{const p=r(a,o+1);!xe(p)&&(i[l]=p)}),t[o]=void 0,i}}return n};return r(e,0)},Cn=J("AsyncFunction"),kn=e=>e&&(Re(e)||B(e))&&B(e.then)&&B(e.catch),Ss=((e,t)=>e?setImmediate:t?((r,n)=>(ie.addEventListener("message",({source:o,data:i})=>{o===ie&&i===r&&n.length&&n.shift()()},!1),o=>{n.push(o),ie.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",B(ie.postMessage)),Rn=typeof queueMicrotask<"u"?queueMicrotask.bind(ie):typeof process<"u"&&process.nextTick||Ss,En=e=>e!=null&&B(e[Ge]),c={isArray:we,isArrayBuffer:gs,isBuffer:ke,isFormData:Zr,isArrayBufferView:Hr,isString:Wr,isNumber:xs,isBoolean:Vr,isObject:Re,isPlainObject:Le,isEmptyObject:Jr,isReadableStream:tn,isRequest:sn,isResponse:rn,isHeaders:nn,isUndefined:xe,isDate:Kr,isFile:Yr,isBlob:Gr,isRegExp:xn,isFunction:B,isStream:Qr,isURLSearchParams:en,isTypedArray:hn,isFileList:Xr,forEach:Ee,merge:ut,extend:an,trim:on,stripBOM:ln,inherits:cn,toFlatObject:dn,kindOf:Xe,kindOfTest:J,endsWith:un,toArray:fn,forEachEntry:mn,matchAll:pn,isHTMLForm:yn,hasOwnProperty:Lt,hasOwnProp:Lt,reduceDescriptors:bs,freezeMethods:wn,toObjectSet:jn,toCamelCase:gn,noop:bn,toFiniteNumber:Sn,findKey:ws,global:ie,isContextDefined:js,isSpecCompliantForm:vn,toJSONObject:_n,isAsyncFn:Cn,isThenable:kn,setImmediate:Ss,asap:Rn,isIterable:En};function E(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}c.inherits(E,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:c.toJSONObject(this.config),code:this.code,status:this.status}}});const vs=E.prototype,_s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{_s[e]={value:e}});Object.defineProperties(E,_s);Object.defineProperty(vs,"isAxiosError",{value:!0});E.from=(e,t,r,n,o,i)=>{const a=Object.create(vs);c.toFlatObject(e,a,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const l=e&&e.message?e.message:"Error",p=t==null&&e?e.code:t;return E.call(a,l,p,r,n,o),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",i&&Object.assign(a,i),a};const An=null;function ft(e){return c.isPlainObject(e)||c.isArray(e)}function Cs(e){return c.endsWith(e,"[]")?e.slice(0,-2):e}function $t(e,t,r){return e?e.concat(t).map(function(o,i){return o=Cs(o),!r&&i?"["+o+"]":o}).join(r?".":""):t}function Pn(e){return c.isArray(e)&&!e.some(ft)}const In=c.toFlatObject(c,{},null,function(t){return/^is[A-Z]/.test(t)});function Ze(e,t,r){if(!c.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=c.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,g){return!c.isUndefined(g[x])});const n=r.metaTokens,o=r.visitor||d,i=r.dots,a=r.indexes,p=(r.Blob||typeof Blob<"u"&&Blob)&&c.isSpecCompliantForm(t);if(!c.isFunction(o))throw new TypeError("visitor must be a function");function u(f){if(f===null)return"";if(c.isDate(f))return f.toISOString();if(c.isBoolean(f))return f.toString();if(!p&&c.isBlob(f))throw new E("Blob is not supported. Use a Buffer instead.");return c.isArrayBuffer(f)||c.isTypedArray(f)?p&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function d(f,x,g){let P=f;if(f&&!g&&typeof f=="object"){if(c.endsWith(x,"{}"))x=n?x:x.slice(0,-2),f=JSON.stringify(f);else if(c.isArray(f)&&Pn(f)||(c.isFileList(f)||c.endsWith(x,"[]"))&&(P=c.toArray(f)))return x=Cs(x),P.forEach(function(C,y){!(c.isUndefined(C)||C===null)&&t.append(a===!0?$t([x],y,i):a===null?x:x+"[]",u(C))}),!1}return ft(f)?!0:(t.append($t(g,x,i),u(f)),!1)}const h=[],w=Object.assign(In,{defaultVisitor:d,convertValue:u,isVisitable:ft});function R(f,x){if(!c.isUndefined(f)){if(h.indexOf(f)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(f),c.forEach(f,function(P,v){(!(c.isUndefined(P)||P===null)&&o.call(t,P,c.isString(v)?v.trim():v,x,w))===!0&&R(P,x?x.concat(v):[v])}),h.pop()}}if(!c.isObject(e))throw new TypeError("data must be an object");return R(e),t}function Dt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function xt(e,t){this._pairs=[],e&&Ze(e,this,t)}const ks=xt.prototype;ks.append=function(t,r){this._pairs.push([t,r])};ks.toString=function(t){const r=t?function(n){return t.call(this,n,Dt)}:Dt;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function Tn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Rs(e,t,r){if(!t)return e;const n=r&&r.encode||Tn;c.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let i;if(o?i=o(t,r):i=c.isURLSearchParams(t)?t.toString():new xt(t,r).toString(n),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Ft{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){c.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Es={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},On=typeof URLSearchParams<"u"?URLSearchParams:xt,Nn=typeof FormData<"u"?FormData:null,Ln=typeof Blob<"u"?Blob:null,$n={isBrowser:!0,classes:{URLSearchParams:On,FormData:Nn,Blob:Ln},protocols:["http","https","file","blob","url","data"]},wt=typeof window<"u"&&typeof document<"u",ht=typeof navigator=="object"&&navigator||void 0,Dn=wt&&(!ht||["ReactNative","NativeScript","NS"].indexOf(ht.product)<0),Fn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Un=wt&&window.location.href||"http://localhost",zn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:wt,hasStandardBrowserEnv:Dn,hasStandardBrowserWebWorkerEnv:Fn,navigator:ht,origin:Un},Symbol.toStringTag,{value:"Module"})),z={...zn,...$n};function Bn(e,t){return Ze(e,new z.classes.URLSearchParams,{visitor:function(r,n,o,i){return z.isNode&&c.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Mn(e){return c.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function qn(e){const t={},r=Object.keys(e);let n;const o=r.length;let i;for(n=0;n<o;n++)i=r[n],t[i]=e[i];return t}function As(e){function t(r,n,o,i){let a=r[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),p=i>=r.length;return a=!a&&c.isArray(o)?o.length:a,p?(c.hasOwnProp(o,a)?o[a]=[o[a],n]:o[a]=n,!l):((!o[a]||!c.isObject(o[a]))&&(o[a]=[]),t(r,n,o[a],i)&&c.isArray(o[a])&&(o[a]=qn(o[a])),!l)}if(c.isFormData(e)&&c.isFunction(e.entries)){const r={};return c.forEachEntry(e,(n,o)=>{t(Mn(n),o,r,0)}),r}return null}function Hn(e,t,r){if(c.isString(e))try{return(t||JSON.parse)(e),c.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Ae={transitional:Es,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",o=n.indexOf("application/json")>-1,i=c.isObject(t);if(i&&c.isHTMLForm(t)&&(t=new FormData(t)),c.isFormData(t))return o?JSON.stringify(As(t)):t;if(c.isArrayBuffer(t)||c.isBuffer(t)||c.isStream(t)||c.isFile(t)||c.isBlob(t)||c.isReadableStream(t))return t;if(c.isArrayBufferView(t))return t.buffer;if(c.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Bn(t,this.formSerializer).toString();if((l=c.isFileList(t))||n.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Ze(l?{"files[]":t}:t,p&&new p,this.formSerializer)}}return i||o?(r.setContentType("application/json",!1),Hn(t)):t}],transformResponse:[function(t){const r=this.transitional||Ae.transitional,n=r&&r.forcedJSONParsing,o=this.responseType==="json";if(c.isResponse(t)||c.isReadableStream(t))return t;if(t&&c.isString(t)&&(n&&!this.responseType||o)){const a=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?E.from(l,E.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:z.classes.FormData,Blob:z.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};c.forEach(["delete","get","head","post","put","patch"],e=>{Ae.headers[e]={}});const Wn=c.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Vn=e=>{const t={};let r,n,o;return e&&e.split(`
`).forEach(function(a){o=a.indexOf(":"),r=a.substring(0,o).trim().toLowerCase(),n=a.substring(o+1).trim(),!(!r||t[r]&&Wn[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Ut=Symbol("internals");function Se(e){return e&&String(e).trim().toLowerCase()}function $e(e){return e===!1||e==null?e:c.isArray(e)?e.map($e):String(e)}function Jn(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Kn=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function rt(e,t,r,n,o){if(c.isFunction(n))return n.call(this,t,r);if(o&&(t=r),!!c.isString(t)){if(c.isString(n))return t.indexOf(n)!==-1;if(c.isRegExp(n))return n.test(t)}}function Yn(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Gn(e,t){const r=c.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(o,i,a){return this[n].call(this,t,o,i,a)},configurable:!0})})}let M=class{constructor(t){t&&this.set(t)}set(t,r,n){const o=this;function i(l,p,u){const d=Se(p);if(!d)throw new Error("header name must be a non-empty string");const h=c.findKey(o,d);(!h||o[h]===void 0||u===!0||u===void 0&&o[h]!==!1)&&(o[h||p]=$e(l))}const a=(l,p)=>c.forEach(l,(u,d)=>i(u,d,p));if(c.isPlainObject(t)||t instanceof this.constructor)a(t,r);else if(c.isString(t)&&(t=t.trim())&&!Kn(t))a(Vn(t),r);else if(c.isObject(t)&&c.isIterable(t)){let l={},p,u;for(const d of t){if(!c.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(p=l[u])?c.isArray(p)?[...p,d[1]]:[p,d[1]]:d[1]}a(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=Se(t),t){const n=c.findKey(this,t);if(n){const o=this[n];if(!r)return o;if(r===!0)return Jn(o);if(c.isFunction(r))return r.call(this,o,n);if(c.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Se(t),t){const n=c.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||rt(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let o=!1;function i(a){if(a=Se(a),a){const l=c.findKey(n,a);l&&(!r||rt(n,n[l],l,r))&&(delete n[l],o=!0)}}return c.isArray(t)?t.forEach(i):i(t),o}clear(t){const r=Object.keys(this);let n=r.length,o=!1;for(;n--;){const i=r[n];(!t||rt(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){const r=this,n={};return c.forEach(this,(o,i)=>{const a=c.findKey(n,i);if(a){r[a]=$e(o),delete r[i];return}const l=t?Yn(i):String(i).trim();l!==i&&delete r[i],r[l]=$e(o),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return c.forEach(this,(n,o)=>{n!=null&&n!==!1&&(r[o]=t&&c.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(o=>n.set(o)),n}static accessor(t){const n=(this[Ut]=this[Ut]={accessors:{}}).accessors,o=this.prototype;function i(a){const l=Se(a);n[l]||(Gn(o,a),n[l]=!0)}return c.isArray(t)?t.forEach(i):i(t),this}};M.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);c.reduceDescriptors(M.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});c.freezeMethods(M);function nt(e,t){const r=this||Ae,n=t||r,o=M.from(n.headers);let i=n.data;return c.forEach(e,function(l){i=l.call(r,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function Ps(e){return!!(e&&e.__CANCEL__)}function je(e,t,r){E.call(this,e??"canceled",E.ERR_CANCELED,t,r),this.name="CanceledError"}c.inherits(je,E,{__CANCEL__:!0});function Is(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new E("Request failed with status code "+r.status,[E.ERR_BAD_REQUEST,E.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Xn(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Qn(e,t){e=e||10;const r=new Array(e),n=new Array(e);let o=0,i=0,a;return t=t!==void 0?t:1e3,function(p){const u=Date.now(),d=n[i];a||(a=u),r[o]=p,n[o]=u;let h=i,w=0;for(;h!==o;)w+=r[h++],h=h%e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),u-a<t)return;const R=d&&u-d;return R?Math.round(w*1e3/R):void 0}}function Zn(e,t){let r=0,n=1e3/t,o,i;const a=(u,d=Date.now())=>{r=d,o=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const d=Date.now(),h=d-r;h>=n?a(u,d):(o=u,i||(i=setTimeout(()=>{i=null,a(o)},n-h)))},()=>o&&a(o)]}const Be=(e,t,r=3)=>{let n=0;const o=Qn(50,250);return Zn(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,p=a-n,u=o(p),d=a<=l;n=a;const h={loaded:a,total:l,progress:l?a/l:void 0,bytes:p,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},r)},zt=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Bt=e=>(...t)=>c.asap(()=>e(...t)),eo=z.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,z.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(z.origin),z.navigator&&/(msie|trident)/i.test(z.navigator.userAgent)):()=>!0,to=z.hasStandardBrowserEnv?{write(e,t,r,n,o,i,a){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];c.isNumber(r)&&l.push(`expires=${new Date(r).toUTCString()}`),c.isString(n)&&l.push(`path=${n}`),c.isString(o)&&l.push(`domain=${o}`),i===!0&&l.push("secure"),c.isString(a)&&l.push(`SameSite=${a}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function so(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ro(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ts(e,t,r){let n=!so(t);return e&&(n||r==!1)?ro(e,t):t}const Mt=e=>e instanceof M?{...e}:e;function ue(e,t){t=t||{};const r={};function n(u,d,h,w){return c.isPlainObject(u)&&c.isPlainObject(d)?c.merge.call({caseless:w},u,d):c.isPlainObject(d)?c.merge({},d):c.isArray(d)?d.slice():d}function o(u,d,h,w){if(c.isUndefined(d)){if(!c.isUndefined(u))return n(void 0,u,h,w)}else return n(u,d,h,w)}function i(u,d){if(!c.isUndefined(d))return n(void 0,d)}function a(u,d){if(c.isUndefined(d)){if(!c.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,h){if(h in t)return n(u,d);if(h in e)return n(void 0,u)}const p={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d,h)=>o(Mt(u),Mt(d),h,!0)};return c.forEach(Object.keys({...e,...t}),function(d){const h=p[d]||o,w=h(e[d],t[d],d);c.isUndefined(w)&&h!==l||(r[d]=w)}),r}const Os=e=>{const t=ue({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:i,headers:a,auth:l}=t;if(t.headers=a=M.from(a),t.url=Rs(Ts(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),c.isFormData(r)){if(z.hasStandardBrowserEnv||z.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(c.isFunction(r.getHeaders)){const p=r.getHeaders(),u=["content-type","content-length"];Object.entries(p).forEach(([d,h])=>{u.includes(d.toLowerCase())&&a.set(d,h)})}}if(z.hasStandardBrowserEnv&&(n&&c.isFunction(n)&&(n=n(t)),n||n!==!1&&eo(t.url))){const p=o&&i&&to.read(i);p&&a.set(o,p)}return t},no=typeof XMLHttpRequest<"u",oo=no&&function(e){return new Promise(function(r,n){const o=Os(e);let i=o.data;const a=M.from(o.headers).normalize();let{responseType:l,onUploadProgress:p,onDownloadProgress:u}=o,d,h,w,R,f;function x(){R&&R(),f&&f(),o.cancelToken&&o.cancelToken.unsubscribe(d),o.signal&&o.signal.removeEventListener("abort",d)}let g=new XMLHttpRequest;g.open(o.method.toUpperCase(),o.url,!0),g.timeout=o.timeout;function P(){if(!g)return;const C=M.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:C,config:e,request:g};Is(function(j){r(j),x()},function(j){n(j),x()},S),g=null}"onloadend"in g?g.onloadend=P:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(P)},g.onabort=function(){g&&(n(new E("Request aborted",E.ECONNABORTED,e,g)),g=null)},g.onerror=function(y){const S=y&&y.message?y.message:"Network Error",m=new E(S,E.ERR_NETWORK,e,g);m.event=y||null,n(m),g=null},g.ontimeout=function(){let y=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const S=o.transitional||Es;o.timeoutErrorMessage&&(y=o.timeoutErrorMessage),n(new E(y,S.clarifyTimeoutError?E.ETIMEDOUT:E.ECONNABORTED,e,g)),g=null},i===void 0&&a.setContentType(null),"setRequestHeader"in g&&c.forEach(a.toJSON(),function(y,S){g.setRequestHeader(S,y)}),c.isUndefined(o.withCredentials)||(g.withCredentials=!!o.withCredentials),l&&l!=="json"&&(g.responseType=o.responseType),u&&([w,f]=Be(u,!0),g.addEventListener("progress",w)),p&&g.upload&&([h,R]=Be(p),g.upload.addEventListener("progress",h),g.upload.addEventListener("loadend",R)),(o.cancelToken||o.signal)&&(d=C=>{g&&(n(!C||C.type?new je(null,e,g):C),g.abort(),g=null)},o.cancelToken&&o.cancelToken.subscribe(d),o.signal&&(o.signal.aborted?d():o.signal.addEventListener("abort",d)));const v=Xn(o.url);if(v&&z.protocols.indexOf(v)===-1){n(new E("Unsupported protocol "+v+":",E.ERR_BAD_REQUEST,e));return}g.send(i||null)})},ao=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,o;const i=function(u){if(!o){o=!0,l();const d=u instanceof Error?u:this.reason;n.abort(d instanceof E?d:new je(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,i(new E(`timeout ${t} of ms exceeded`,E.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:p}=n;return p.unsubscribe=()=>c.asap(l),p}},io=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,o;for(;n<r;)o=n+t,yield e.slice(n,o),n=o},lo=async function*(e,t){for await(const r of co(e))yield*io(r,t)},co=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},qt=(e,t,r,n)=>{const o=lo(e,t);let i=0,a,l=p=>{a||(a=!0,n&&n(p))};return new ReadableStream({async pull(p){try{const{done:u,value:d}=await o.next();if(u){l(),p.close();return}let h=d.byteLength;if(r){let w=i+=h;r(w)}p.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(p){return l(p),o.return()}},{highWaterMark:2})},Ht=64*1024,{isFunction:Te}=c,uo=(({Request:e,Response:t})=>({Request:e,Response:t}))(c.global),{ReadableStream:Wt,TextEncoder:Vt}=c.global,Jt=(e,...t)=>{try{return!!e(...t)}catch{return!1}},fo=e=>{e=c.merge.call({skipUndefined:!0},uo,e);const{fetch:t,Request:r,Response:n}=e,o=t?Te(t):typeof fetch=="function",i=Te(r),a=Te(n);if(!o)return!1;const l=o&&Te(Wt),p=o&&(typeof Vt=="function"?(f=>x=>f.encode(x))(new Vt):async f=>new Uint8Array(await new r(f).arrayBuffer())),u=i&&l&&Jt(()=>{let f=!1;const x=new r(z.origin,{body:new Wt,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!x}),d=a&&l&&Jt(()=>c.isReadableStream(new n("").body)),h={stream:d&&(f=>f.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!h[f]&&(h[f]=(x,g)=>{let P=x&&x[f];if(P)return P.call(x);throw new E(`Response type '${f}' is not supported`,E.ERR_NOT_SUPPORT,g)})});const w=async f=>{if(f==null)return 0;if(c.isBlob(f))return f.size;if(c.isSpecCompliantForm(f))return(await new r(z.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(c.isArrayBufferView(f)||c.isArrayBuffer(f))return f.byteLength;if(c.isURLSearchParams(f)&&(f=f+""),c.isString(f))return(await p(f)).byteLength},R=async(f,x)=>{const g=c.toFiniteNumber(f.getContentLength());return g??w(x)};return async f=>{let{url:x,method:g,data:P,signal:v,cancelToken:C,timeout:y,onDownloadProgress:S,onUploadProgress:m,responseType:j,headers:b,withCredentials:A="same-origin",fetchOptions:q}=Os(f),U=t||fetch;j=j?(j+"").toLowerCase():"text";let Q=ao([v,C&&C.toAbortSignal()],y),X=null;const oe=Q&&Q.unsubscribe&&(()=>{Q.unsubscribe()});let bt;try{if(m&&u&&g!=="get"&&g!=="head"&&(bt=await R(b,P))!==0){let ee=new r(x,{method:"POST",body:P,duplex:"half"}),me;if(c.isFormData(P)&&(me=ee.headers.get("content-type"))&&b.setContentType(me),ee.body){const[tt,Pe]=zt(bt,Be(Bt(m)));P=qt(ee.body,Ht,tt,Pe)}}c.isString(A)||(A=A?"include":"omit");const K=i&&"credentials"in r.prototype,St={...q,signal:Q,method:g.toUpperCase(),headers:b.normalize().toJSON(),body:P,duplex:"half",credentials:K?A:void 0};X=i&&new r(x,St);let Z=await(i?U(X,q):U(x,St));const vt=d&&(j==="stream"||j==="response");if(d&&(S||vt&&oe)){const ee={};["status","statusText","headers"].forEach(_t=>{ee[_t]=Z[_t]});const me=c.toFiniteNumber(Z.headers.get("content-length")),[tt,Pe]=S&&zt(me,Be(Bt(S),!0))||[];Z=new n(qt(Z.body,Ht,tt,()=>{Pe&&Pe(),oe&&oe()}),ee)}j=j||"text";let Bs=await h[c.findKey(h,j)||"text"](Z,f);return!vt&&oe&&oe(),await new Promise((ee,me)=>{Is(ee,me,{data:Bs,headers:M.from(Z.headers),status:Z.status,statusText:Z.statusText,config:f,request:X})})}catch(K){throw oe&&oe(),K&&K.name==="TypeError"&&/Load failed|fetch/i.test(K.message)?Object.assign(new E("Network Error",E.ERR_NETWORK,f,X),{cause:K.cause||K}):E.from(K,K&&K.code,f,X)}}},ho=new Map,Ns=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:o}=t,i=[n,o,r];let a=i.length,l=a,p,u,d=ho;for(;l--;)p=i[l],u=d.get(p),u===void 0&&d.set(p,u=l?new Map:fo(t)),d=u;return u};Ns();const jt={http:An,xhr:oo,fetch:{get:Ns}};c.forEach(jt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Kt=e=>`- ${e}`,mo=e=>c.isFunction(e)||e===null||e===!1;function po(e,t){e=c.isArray(e)?e:[e];const{length:r}=e;let n,o;const i={};for(let a=0;a<r;a++){n=e[a];let l;if(o=n,!mo(n)&&(o=jt[(l=String(n)).toLowerCase()],o===void 0))throw new E(`Unknown adapter '${l}'`);if(o&&(c.isFunction(o)||(o=o.get(t))))break;i[l||"#"+a]=o}if(!o){const a=Object.entries(i).map(([p,u])=>`adapter ${p} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=r?a.length>1?`since :
`+a.map(Kt).join(`
`):" "+Kt(a[0]):"as no adapter specified";throw new E("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return o}const Ls={getAdapter:po,adapters:jt};function ot(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new je(null,e)}function Yt(e){return ot(e),e.headers=M.from(e.headers),e.data=nt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ls.getAdapter(e.adapter||Ae.adapter,e)(e).then(function(n){return ot(e),n.data=nt.call(e,e.transformResponse,n),n.headers=M.from(n.headers),n},function(n){return Ps(n)||(ot(e),n&&n.response&&(n.response.data=nt.call(e,e.transformResponse,n.response),n.response.headers=M.from(n.response.headers))),Promise.reject(n)})}const $s="1.13.2",et={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{et[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Gt={};et.transitional=function(t,r,n){function o(i,a){return"[Axios v"+$s+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,l)=>{if(t===!1)throw new E(o(a," has been removed"+(r?" in "+r:"")),E.ERR_DEPRECATED);return r&&!Gt[a]&&(Gt[a]=!0,console.warn(o(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,a,l):!0}};et.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function yo(e,t,r){if(typeof e!="object")throw new E("options must be an object",E.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const i=n[o],a=t[i];if(a){const l=e[i],p=l===void 0||a(l,i,e);if(p!==!0)throw new E("option "+i+" must be "+p,E.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new E("Unknown option "+i,E.ERR_BAD_OPTION)}}const De={assertOptions:yo,validators:et},Y=De.validators;let le=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ft,response:new Ft}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ue(this.defaults,r);const{transitional:n,paramsSerializer:o,headers:i}=r;n!==void 0&&De.assertOptions(n,{silentJSONParsing:Y.transitional(Y.boolean),forcedJSONParsing:Y.transitional(Y.boolean),clarifyTimeoutError:Y.transitional(Y.boolean)},!1),o!=null&&(c.isFunction(o)?r.paramsSerializer={serialize:o}:De.assertOptions(o,{encode:Y.function,serialize:Y.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),De.assertOptions(r,{baseUrl:Y.spelling("baseURL"),withXsrfToken:Y.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&c.merge(i.common,i[r.method]);i&&c.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),r.headers=M.concat(a,i);const l=[];let p=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(p=p&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let d,h=0,w;if(!p){const f=[Yt.bind(this),void 0];for(f.unshift(...l),f.push(...u),w=f.length,d=Promise.resolve(r);h<w;)d=d.then(f[h++],f[h++]);return d}w=l.length;let R=r;for(;h<w;){const f=l[h++],x=l[h++];try{R=f(R)}catch(g){x.call(this,g);break}}try{d=Yt.call(this,R)}catch(f){return Promise.reject(f)}for(h=0,w=u.length;h<w;)d=d.then(u[h++],u[h++]);return d}getUri(t){t=ue(this.defaults,t);const r=Ts(t.baseURL,t.url,t.allowAbsoluteUrls);return Rs(r,t.params,t.paramsSerializer)}};c.forEach(["delete","get","head","options"],function(t){le.prototype[t]=function(r,n){return this.request(ue(n||{},{method:t,url:r,data:(n||{}).data}))}});c.forEach(["post","put","patch"],function(t){function r(n){return function(i,a,l){return this.request(ue(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}le.prototype[t]=r(),le.prototype[t+"Form"]=r(!0)});let go=class Ds{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(o=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](o);n._listeners=null}),this.promise.then=o=>{let i;const a=new Promise(l=>{n.subscribe(l),i=l}).then(o);return a.cancel=function(){n.unsubscribe(i)},a},t(function(i,a,l){n.reason||(n.reason=new je(i,a,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Ds(function(o){t=o}),cancel:t}}};function xo(e){return function(r){return e.apply(null,r)}}function wo(e){return c.isObject(e)&&e.isAxiosError===!0}const mt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mt).forEach(([e,t])=>{mt[t]=e});function Fs(e){const t=new le(e),r=ps(le.prototype.request,t);return c.extend(r,le.prototype,t,{allOwnKeys:!0}),c.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return Fs(ue(e,o))},r}const L=Fs(Ae);L.Axios=le;L.CanceledError=je;L.CancelToken=go;L.isCancel=Ps;L.VERSION=$s;L.toFormData=Ze;L.AxiosError=E;L.Cancel=L.CanceledError;L.all=function(t){return Promise.all(t)};L.spread=xo;L.isAxiosError=wo;L.mergeConfig=ue;L.AxiosHeaders=M;L.formToJSON=e=>As(c.isHTMLForm(e)?new FormData(e):e);L.getAdapter=Ls.getAdapter;L.HttpStatusCode=mt;L.default=L;const{Axios:Wo,AxiosError:Vo,CanceledError:Jo,isCancel:Ko,CancelToken:Yo,VERSION:Go,all:Xo,Cancel:Qo,isAxiosError:Zo,spread:ea,toFormData:ta,AxiosHeaders:sa,HttpStatusCode:ra,formToJSON:na,getAdapter:oa,mergeConfig:aa}=L;class jo{constructor(t="/api"){Ct(this,"client");this.client=L.create({baseURL:t,timeout:3e4,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(r=>{const n=localStorage.getItem("token");return n&&(r.headers.Authorization=`Bearer ${n}`),r},r=>Promise.reject(r)),this.client.interceptors.response.use(r=>r,r=>{var n;return((n=r.response)==null?void 0:n.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(r)})}async get(t,r){return(await this.client.get(t,r)).data}async post(t,r,n){return(await this.client.post(t,r,n)).data}async put(t,r,n){return(await this.client.put(t,r,n)).data}async delete(t,r){return(await this.client.delete(t,r)).data}async patch(t,r,n){return(await this.client.patch(t,r,n)).data}}const $=new jo,Us={login:e=>$.post("/auth/login",e),logout:()=>$.post("/auth/logout"),getCurrentUser:()=>$.get("/auth/user"),updateProfile:e=>$.put("/profile",e)},{Header:bo,Sider:So,Content:vo}=at;function _o(){const e=fe(),t=or(),{user:r,logout:n}=he(),[o,i]=_.useState(!1),a=[{key:"/dashboard",icon:s.jsx(Gs,{}),label:"Dashboard",onClick:()=>e("/dashboard")},{key:"/nodes",icon:s.jsx(Xs,{}),label:"Nodes",onClick:()=>e("/nodes")},{key:"/alerts",icon:s.jsx(Fe,{}),label:"Alerts",children:[{key:"/alerts",label:"Alert List",onClick:()=>e("/alerts")},{key:"/alerts/rules",label:"Alert Rules",onClick:()=>e("/alerts/rules")}]},{key:"/logs",icon:s.jsx(es,{}),label:"Logs",onClick:()=>e("/logs")},{key:"/users",icon:s.jsx(re,{}),label:"Users",onClick:()=>e("/users")},{key:"/settings",icon:s.jsx(it,{}),label:"Settings",onClick:()=>e("/settings")}],l=[{key:"profile",icon:s.jsx(re,{}),label:"Profile",onClick:()=>e("/profile")},{key:"settings",icon:s.jsx(it,{}),label:"Settings",onClick:()=>e("/settings")},{type:"divider"},{key:"logout",icon:s.jsx(Qs,{}),label:"Logout",onClick:()=>{n(),e("/login")}}],p=t.pathname;return s.jsxs(at,{style:{minHeight:"100vh"},children:[s.jsxs(So,{trigger:null,collapsible:!0,collapsed:o,style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:[s.jsx("div",{style:{height:64,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:o?16:20,fontWeight:"bold"},children:o?"GC":"Go-CESI"}),s.jsx(Vs,{theme:"dark",mode:"inline",selectedKeys:[p],items:a})]}),s.jsxs(at,{style:{marginLeft:o?80:200,transition:"all 0.2s"},children:[s.jsxs(bo,{style:{padding:"0 24px",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 1px 4px rgba(0,21,41,.08)"},children:[s.jsx("div",{children:o?s.jsx(Js,{style:{fontSize:18,cursor:"pointer"},onClick:()=>i(!1)}):s.jsx(Ks,{style:{fontSize:18,cursor:"pointer"},onClick:()=>i(!0)})}),s.jsxs(N,{size:"large",children:[s.jsx(Qt,{count:0,showZero:!1,children:s.jsx(Fe,{style:{fontSize:18,cursor:"pointer"}})}),s.jsx(Ys,{menu:{items:l},placement:"bottomRight",children:s.jsxs(N,{style:{cursor:"pointer"},children:[s.jsx(Zt,{icon:s.jsx(re,{})}),s.jsx("span",{children:(r==null?void 0:r.username)||"User"})]})})]})]}),s.jsx(vo,{style:{margin:"24px 16px",padding:24,minHeight:280,background:"#f0f2f5"},children:s.jsx(ar,{})})]})]})}function Co(){const e=fe(),{setUser:t,setToken:r}=he(),[n,o]=_.useState(!1),i=async a=>{var l,p;o(!0);try{const u=await Us.login(a);if(u.status==="success"&&u.data){const{token:d,username:h,is_admin:w}=u.data;r(d),t({id:"",username:h,email:"",is_admin:w,created_at:"",updated_at:""}),I.success("Login successful!"),e("/dashboard")}else I.error(u.message||"Login failed")}catch(u){I.error(((p=(l=u.response)==null?void 0:l.data)==null?void 0:p.message)||"Login failed")}finally{o(!1)}};return s.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:s.jsx(O,{style:{width:400,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:s.jsxs(N,{direction:"vertical",size:"large",style:{width:"100%"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("h1",{style:{fontSize:32,fontWeight:"bold",margin:0},children:"Go-CESI"}),s.jsx("p",{style:{color:"#666",marginTop:8},children:"Supervisor Management Platform"})]}),s.jsxs(k,{name:"login",onFinish:i,autoComplete:"off",size:"large",children:[s.jsx(k.Item,{name:"username",rules:[{required:!0,message:"Please input your username!"}],children:s.jsx(D,{prefix:s.jsx(re,{}),placeholder:"Username"})}),s.jsx(k.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:s.jsx(D.Password,{prefix:s.jsx(pe,{}),placeholder:"Password"})}),s.jsx(k.Item,{children:s.jsx(T,{type:"primary",htmlType:"submit",loading:n,block:!0,children:"Log in"})})]}),s.jsx("div",{style:{textAlign:"center",color:"#999",fontSize:12},children:"Default: admin / 123456"})]})})})}const se={getNodes:()=>$.get("/nodes"),getNode:e=>$.get(`/nodes/${e}`),getNodeProcesses:e=>$.get(`/nodes/${e}/processes`),startProcess:(e,t)=>$.post(`/nodes/${e}/processes/${t}/start`),stopProcess:(e,t)=>$.post(`/nodes/${e}/processes/${t}/stop`),restartProcess:(e,t)=>$.post(`/nodes/${e}/processes/${t}/restart`),startAllProcesses:e=>$.post(`/nodes/${e}/processes/start-all`),stopAllProcesses:e=>$.post(`/nodes/${e}/processes/stop-all`),restartAllProcesses:e=>$.post(`/nodes/${e}/processes/restart-all`),getProcessLogs:(e,t)=>$.get(`/nodes/${e}/processes/${t}/logs`)},zs=(e={})=>{var f;const{onMessage:t,onConnect:r,onDisconnect:n,onError:o,reconnectInterval:i=3e3,maxReconnectAttempts:a=5}=e,l=_.useRef(null),p=_.useRef(0),u=_.useRef(),d=_.useRef(!0),h=_.useCallback(()=>{const x=localStorage.getItem("token");if(!x)return;const g=window.location.protocol==="https:"?"wss:":"ws:",P=window.location.host,v=`${g}//${P}/ws?token=${x}`;try{const C=new WebSocket(v);C.onopen=()=>{p.current=0,r==null||r()},C.onmessage=y=>{try{const S=y.data.split(`
`).filter(m=>m.trim());for(const m of S)try{const j=JSON.parse(m);t==null||t(j)}catch(j){console.error("Error parsing WebSocket message:",j)}}catch(S){console.error("Error processing WebSocket message:",S)}},C.onclose=()=>{n==null||n(),d.current&&p.current<a&&(p.current++,u.current=setTimeout(h,i))},C.onerror=()=>{o==null||o(new Event("error"))},l.current=C}catch(C){console.error("Failed to create WebSocket connection:",C)}},[t,r,n,o,i,a]),w=_.useCallback(()=>{d.current=!1,u.current&&clearTimeout(u.current),l.current&&(l.current.close(),l.current=null)},[]),R=_.useCallback(x=>{l.current&&l.current.readyState===WebSocket.OPEN?l.current.send(JSON.stringify(x)):console.error("WebSocket is not connected")},[]);return _.useEffect(()=>(localStorage.getItem("token")&&(d.current=!0,h()),()=>{w()}),[h,w]),{send:R,disconnect:w,reconnect:h,isConnected:((f=l.current)==null?void 0:f.readyState)===WebSocket.OPEN}};function ko(){const e=fe(),{nodes:t,setNodes:r,systemStats:n,setSystemStats:o}=he(),[i,a]=_.useState(!1),[l,p]=_.useState([]),[u,d]=_.useState([]),[h,w]=_.useState([]);_.useEffect(()=>{R()},[]);const R=async()=>{a(!0);try{const S=await se.getNodes();r(S.nodes||[])}catch(S){console.error("Failed to load nodes:",S)}finally{a(!1)}};zs({onMessage:S=>{if(S.type==="nodes_update")r(S.data);else if(S.type==="system_stats"){o(S.data);const m=new Date().toLocaleTimeString();w(j=>[...j.slice(-19),m]),p(j=>[...j.slice(-19),Math.random()*100]),d(j=>[...j.slice(-19),Math.random()*100])}}});const f=t.length,x=t.filter(S=>S.is_connected).length,g=(n==null?void 0:n.running_processes)||0,P=(n==null?void 0:n.active_alerts)||0,v=[{title:"Node Name",dataIndex:"name",key:"name",render:S=>s.jsx("a",{onClick:()=>e(`/nodes/${S}`),children:S})},{title:"Environment",dataIndex:"environment",key:"environment",render:S=>s.jsx(F,{color:"blue",children:S})},{title:"Host",key:"host",render:(S,m)=>`${m.host}:${m.port}`},{title:"Status",dataIndex:"is_connected",key:"status",render:S=>S?s.jsx(F,{icon:s.jsx(ge,{}),color:"success",children:"Online"}):s.jsx(F,{icon:s.jsx(ye,{}),color:"error",children:"Offline"})},{title:"Processes",dataIndex:"process_count",key:"process_count",render:S=>S||0},{title:"Action",key:"action",render:(S,m)=>s.jsx(T,{type:"link",size:"small",onClick:()=>e(`/nodes/${m.name}`),children:"View Details"})}],C={title:{text:"CPU Usage",left:"center"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:h,boundaryGap:!1},yAxis:{type:"value",max:100,axisLabel:{formatter:"{value}%"}},series:[{name:"CPU",type:"line",data:l,smooth:!0,areaStyle:{opacity:.3},itemStyle:{color:"#1890ff"}}],grid:{left:50,right:20,bottom:30,top:50}},y={title:{text:"Memory Usage",left:"center"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:h,boundaryGap:!1},yAxis:{type:"value",max:100,axisLabel:{formatter:"{value}%"}},series:[{name:"Memory",type:"line",data:u,smooth:!0,areaStyle:{opacity:.3},itemStyle:{color:"#52c41a"}}],grid:{left:50,right:20,bottom:30,top:50}};return s.jsxs("div",{children:[s.jsxs(Ue,{gutter:16,style:{marginBottom:24},children:[s.jsx(G,{xs:24,sm:12,lg:6,children:s.jsx(O,{children:s.jsx(ae,{title:"Total Nodes",value:f,prefix:null,valueStyle:{color:"#1890ff"}})})}),s.jsx(G,{xs:24,sm:12,lg:6,children:s.jsx(O,{children:s.jsx(ae,{title:"Online Nodes",value:x,prefix:s.jsx(ge,{}),valueStyle:{color:"#3f8600"}})})}),s.jsx(G,{xs:24,sm:12,lg:6,children:s.jsx(O,{children:s.jsx(ae,{title:"Running Processes",value:g,prefix:s.jsx(lt,{}),valueStyle:{color:"#1890ff"}})})}),s.jsx(G,{xs:24,sm:12,lg:6,children:s.jsx(O,{children:s.jsx(ae,{title:"Active Alerts",value:P,prefix:s.jsx(Fe,{}),valueStyle:{color:P>0?"#cf1322":"#999"}})})})]}),s.jsxs(Ue,{gutter:16,style:{marginBottom:24},children:[s.jsx(G,{xs:24,lg:12,children:s.jsx(O,{children:s.jsx(At,{option:C,style:{height:300}})})}),s.jsx(G,{xs:24,lg:12,children:s.jsx(O,{children:s.jsx(At,{option:y,style:{height:300}})})})]}),s.jsx(O,{title:"Nodes Overview",extra:s.jsx(T,{type:"primary",onClick:R,loading:i,children:"Refresh"}),children:s.jsx(ce,{columns:v,dataSource:t,rowKey:"name",loading:i,pagination:{pageSize:10}})})]})}function Ro(){const e=fe(),{nodes:t,setNodes:r}=he(),[n,o]=_.useState(!1);_.useEffect(()=>{i()},[]);const i=async()=>{o(!0);try{const a=await se.getNodes();r(a.nodes||[])}catch(a){console.error("Failed to load nodes:",a)}finally{o(!1)}};return zs({onMessage:a=>{a.type==="nodes_update"&&r(a.data)}}),n&&t.length===0?s.jsx("div",{style:{textAlign:"center",padding:50},children:s.jsx(ts,{size:"large"})}):s.jsxs("div",{children:[s.jsxs("div",{style:{marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0,fontSize:24},children:"Nodes"}),s.jsx("p",{style:{color:"#666",marginTop:8},children:"Manage your supervisor nodes"})]}),s.jsx(T,{type:"primary",icon:s.jsx(de,{}),onClick:i,loading:n,children:"Refresh"})]}),t.length===0?s.jsx(O,{children:s.jsx(kt,{description:"No nodes configured",image:kt.PRESENTED_IMAGE_SIMPLE,children:s.jsx("p",{style:{color:"#999"},children:"Add nodes in your config.toml file"})})}):s.jsx(Ue,{gutter:[16,16],children:t.map(a=>s.jsx(G,{xs:24,sm:12,lg:8,children:s.jsx(Eo,{node:a,onView:()=>e(`/nodes/${a.name}`)})},a.name))})]})}function Eo({node:e,onView:t}){const r=e.is_connected;return s.jsx(O,{hoverable:!0,style:{height:"100%",cursor:"pointer"},onClick:t,children:s.jsxs(N,{direction:"vertical",size:"middle",style:{width:"100%"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{style:{width:48,height:48,borderRadius:8,background:"#1890ff20",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(ge,{style:{fontSize:24,color:"#1890ff"}})}),s.jsxs("div",{children:[s.jsx("h3",{style:{margin:0,fontSize:18},children:e.name}),s.jsx(F,{color:"blue",style:{marginTop:4},children:e.environment||"default"})]})]}),s.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:r?"#52c41a":"#ff4d4f"}})]}),s.jsxs("div",{children:[s.jsxs("div",{style:{color:"#666",fontSize:14,marginBottom:4},children:[e.host,":",e.port]}),e.username&&s.jsxs("div",{style:{color:"#666",fontSize:14},children:["User: ",e.username]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:16,borderTop:"1px solid #f0f0f0"},children:[s.jsxs("div",{style:{textAlign:"center",flex:1},children:[s.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#1890ff"},children:e.process_count||0}),s.jsx("div",{style:{fontSize:12,color:"#999"},children:"Processes"})]}),s.jsx("div",{style:{textAlign:"center",flex:1,borderLeft:"1px solid #f0f0f0"},children:s.jsx(F,{icon:r?s.jsx(ge,{}):s.jsx(ye,{}),color:r?"success":"error",children:r?"Online":"Offline"})})]}),s.jsx(T,{type:"primary",block:!0,icon:s.jsx(Zs,{}),onClick:n=>{n.stopPropagation(),t()},children:"View Details"})]})})}const{TextArea:Xt}=D,Ao=()=>{const{nodeName:e}=ir(),t=fe(),[r,n]=_.useState(null),[o,i]=_.useState([]),[a,l]=_.useState(!0),[p,u]=_.useState({}),[d,h]=_.useState(!1),[w,R]=_.useState(null),[f,x]=_.useState({stdout:"",stderr:""});_.useEffect(()=>{e&&g()},[e]);const g=async()=>{var b,A,q;if(e){l(!0);try{const Q=(A=(b=(await se.getNodes()).data)==null?void 0:b.nodes)==null?void 0:A.find(X=>X.name===e);if(Q){if(n(Q),Q.is_connected){const X=await se.getNodeProcesses(e);i(((q=X.data)==null?void 0:q.processes)||[])}}else I.error("Node not found"),t("/nodes")}catch(U){console.error("Failed to load node detail:",U),I.error("Failed to load node detail")}finally{l(!1)}}},P=async(b,A)=>{if(!e)return;const q=`${b}-${A}`;u(U=>({...U,[q]:!0}));try{switch(A){case"start":await se.startProcess(e,b),I.success(`Started ${b}`);break;case"stop":await se.stopProcess(e,b),I.success(`Stopped ${b}`);break;case"restart":await se.restartProcess(e,b),I.success(`Restarted ${b}`);break}await g()}catch(U){console.error(`Failed to ${A} process:`,U),I.error(`Failed to ${A} process`)}finally{u(U=>({...U,[q]:!1}))}},v=async b=>{var A,q;if(e){R(b),h(!0);try{const U=await se.getProcessLogs(e,b.name);x({stdout:((A=U.data)==null?void 0:A.stdout)||"No stdout logs",stderr:((q=U.data)==null?void 0:q.stderr)||"No stderr logs"})}catch(U){console.error("Failed to load logs:",U),I.error("Failed to load logs")}}},C=b=>{switch(b){case 20:return"success";case 0:return"default";case 10:return"processing";case 30:return"warning";case 100:return"error";default:return"default"}},y=[{title:"Name",dataIndex:"name",key:"name",render:b=>s.jsx("strong",{children:b})},{title:"Group",dataIndex:"group",key:"group"},{title:"State",dataIndex:"state_string",key:"state_string",render:(b,A)=>s.jsx(F,{color:C(A.state),children:b})},{title:"PID",dataIndex:"pid",key:"pid",render:b=>b||"-"},{title:"Uptime",dataIndex:"uptime_human",key:"uptime_human",render:b=>b||"-"},{title:"Description",dataIndex:"description",key:"description",ellipsis:!0},{title:"Actions",key:"actions",render:(b,A)=>s.jsxs(N,{children:[A.state!==20&&s.jsx(T,{type:"primary",size:"small",icon:s.jsx(lt,{}),onClick:()=>P(A.name,"start"),loading:p[`${A.name}-start`],children:"Start"}),A.state===20&&s.jsx(yt,{title:"Stop this process?",onConfirm:()=>P(A.name,"stop"),okText:"Yes",cancelText:"No",children:s.jsx(T,{size:"small",icon:s.jsx(Rt,{}),loading:p[`${A.name}-stop`],danger:!0,children:"Stop"})}),s.jsx(T,{size:"small",icon:s.jsx(de,{}),onClick:()=>P(A.name,"restart"),loading:p[`${A.name}-restart`],children:"Restart"}),s.jsx(T,{size:"small",icon:s.jsx(es,{}),onClick:()=>v(A),children:"Logs"})]})}];if(a)return s.jsx("div",{style:{textAlign:"center",padding:"50px"},children:s.jsx(ts,{size:"large"})});if(!r)return s.jsx("div",{children:"Node not found"});const S=o.filter(b=>b.state===20).length,m=o.filter(b=>b.state===0).length,j=o.length;return s.jsxs("div",{children:[s.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs(N,{children:[s.jsx(T,{icon:s.jsx(er,{}),onClick:()=>t("/nodes"),children:"Back"}),s.jsxs("h1",{style:{margin:0},children:["Node: ",r.name]}),r.is_connected?s.jsx(F,{icon:s.jsx(ge,{}),color:"success",children:"Connected"}):s.jsx(F,{icon:s.jsx(ye,{}),color:"error",children:"Disconnected"})]}),s.jsx(T,{type:"primary",icon:s.jsx(de,{}),onClick:g,loading:a,children:"Refresh"})]}),s.jsxs(Ue,{gutter:16,style:{marginBottom:24},children:[s.jsx(G,{xs:24,sm:8,children:s.jsx(O,{children:s.jsx(ae,{title:"Total Processes",value:j,prefix:s.jsx(ct,{})})})}),s.jsx(G,{xs:24,sm:8,children:s.jsx(O,{children:s.jsx(ae,{title:"Running",value:S,prefix:s.jsx(lt,{}),valueStyle:{color:"#52c41a"}})})}),s.jsx(G,{xs:24,sm:8,children:s.jsx(O,{children:s.jsx(ae,{title:"Stopped",value:m,prefix:s.jsx(Rt,{}),valueStyle:{color:"#ff4d4f"}})})})]}),s.jsx(ze,{defaultActiveKey:"processes",items:[{key:"processes",label:"Processes",children:s.jsx(O,{children:s.jsx(ce,{columns:y,dataSource:o,rowKey:"name",pagination:{pageSize:10},scroll:{x:800}})})},{key:"info",label:"Node Information",children:s.jsx(O,{children:s.jsxs(te,{bordered:!0,column:2,children:[s.jsx(te.Item,{label:"Name",children:r.name}),s.jsx(te.Item,{label:"Host",children:r.host}),s.jsx(te.Item,{label:"Port",children:r.port}),s.jsx(te.Item,{label:"Environment",children:s.jsx(F,{color:r.environment==="production"?"red":"blue",children:r.environment||"development"})}),s.jsx(te.Item,{label:"Username",children:r.username}),s.jsx(te.Item,{label:"Status",children:s.jsx(F,{color:r.is_connected?"success":"error",children:r.is_connected?"Connected":"Disconnected"})}),s.jsx(te.Item,{label:"Last Ping",span:2,children:r.last_ping?new Date(r.last_ping).toLocaleString():"-"})]})})}]}),s.jsx(pt,{title:`Logs: ${w==null?void 0:w.name}`,open:d,onCancel:()=>h(!1),width:800,footer:[s.jsx(T,{onClick:()=>h(!1),children:"Close"},"close")],children:s.jsx(ze,{items:[{key:"stdout",label:"Standard Output",children:s.jsx(Xt,{value:f.stdout,rows:15,readOnly:!0,style:{fontFamily:"monospace",fontSize:"12px"}})},{key:"stderr",label:"Standard Error",children:s.jsx(Xt,{value:f.stderr,rows:15,readOnly:!0,style:{fontFamily:"monospace",fontSize:"12px"}})}]})})]})},ve={getUsers:async(e=1,t=20)=>(await $.get(`/users?page=${e}&page_size=${t}`)).data,getUser:async e=>(await $.get(`/users/${e}`)).data,createUser:async e=>(await $.post("/users",e)).data,updateUser:async(e,t)=>(await $.put(`/users/${e}`,t)).data,deleteUser:async e=>(await $.delete(`/users/${e}`)).data,toggleUserStatus:async(e,t)=>(await $.patch(`/users/${e}/toggle`,{is_active:t})).data},Po=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!0),[o,i]=_.useState(!1),[a,l]=_.useState(null),[p,u]=_.useState(0),[d,h]=_.useState(1),[w,R]=_.useState(20),[f]=k.useForm();_.useEffect(()=>{x()},[d,w]);const x=async()=>{var m;n(!0);try{const j=await ve.getUsers(d,w);(m=j==null?void 0:j.data)!=null&&m.users&&(t(j.data.users),u(j.data.total))}catch(j){console.error("Failed to load users:",j),I.error("Failed to load users")}finally{n(!1)}},g=()=>{l(null),f.resetFields(),i(!0)},P=m=>{l(m),f.setFieldsValue({username:m.username,email:m.email,full_name:m.full_name,is_admin:m.is_admin,is_active:m.is_active}),i(!0)},v=async m=>{var j,b;try{await ve.deleteUser(m),I.success("User deleted successfully"),x()}catch(A){I.error(((b=(j=A.response)==null?void 0:j.data)==null?void 0:b.message)||"Failed to delete user")}},C=async(m,j)=>{var b,A;try{await ve.toggleUserStatus(m,j),I.success(`User ${j?"activated":"deactivated"} successfully`),x()}catch(q){I.error(((A=(b=q.response)==null?void 0:b.data)==null?void 0:A.message)||"Failed to update user status")}},y=async()=>{var m,j;try{const b=await f.validateFields();if(a){const A={email:b.email,full_name:b.full_name,is_admin:b.is_admin,is_active:b.is_active};await ve.updateUser(a.id,A),I.success("User updated successfully")}else{const A={username:b.username,email:b.email,password:b.password,full_name:b.full_name,is_admin:b.is_admin||!1};await ve.createUser(A),I.success("User created successfully")}i(!1),x()}catch(b){console.error("Operation failed:",b),I.error(((j=(m=b.response)==null?void 0:m.data)==null?void 0:j.message)||"Operation failed")}},S=[{title:"User",key:"user",render:(m,j)=>s.jsxs(N,{children:[s.jsx(Zt,{icon:s.jsx(re,{})}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:500},children:j.username}),s.jsx("div",{style:{fontSize:"12px",color:"#999"},children:j.email})]})]})},{title:"Full Name",dataIndex:"full_name",key:"full_name",render:m=>m||"-"},{title:"Role",dataIndex:"is_admin",key:"role",render:m=>s.jsx(F,{color:m?"red":"blue",children:m?"Admin":"User"})},{title:"Status",dataIndex:"is_active",key:"status",render:(m,j)=>s.jsx(V,{checked:m,onChange:b=>C(j.id,b),checkedChildren:"Active",unCheckedChildren:"Inactive"})},{title:"Last Login",dataIndex:"last_login",key:"last_login",render:m=>m?new Date(m).toLocaleString():"Never"},{title:"Created",dataIndex:"created_at",key:"created_at",render:m=>new Date(m).toLocaleDateString()},{title:"Actions",key:"actions",render:(m,j)=>s.jsxs(N,{children:[s.jsx(T,{type:"link",icon:s.jsx(ns,{}),onClick:()=>P(j),children:"Edit"}),s.jsx(yt,{title:"Delete user",description:"Are you sure you want to delete this user?",onConfirm:()=>v(j.id),okText:"Yes",cancelText:"No",disabled:j.is_admin,children:s.jsx(T,{type:"link",danger:!0,icon:s.jsx(os,{}),disabled:j.is_admin,children:"Delete"})})]})}];return s.jsxs("div",{style:{padding:"24px"},children:[s.jsx(O,{title:"User Management",extra:s.jsxs(N,{children:[s.jsx(T,{icon:s.jsx(de,{}),onClick:x,loading:r,children:"Refresh"}),s.jsx(T,{type:"primary",icon:s.jsx(ss,{}),onClick:g,children:"Add User"})]}),children:s.jsx(ce,{columns:S,dataSource:e,rowKey:"id",loading:r,pagination:{current:d,pageSize:w,total:p,showSizeChanger:!0,showTotal:m=>`Total ${m} users`,onChange:(m,j)=>{h(m),R(j)}}})}),s.jsx(pt,{title:a?"Edit User":"Create User",open:o,onOk:y,onCancel:()=>i(!1),width:600,children:s.jsxs(k,{form:f,layout:"vertical",initialValues:{is_admin:!1,is_active:!0},children:[s.jsx(k.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please enter username"},{min:3,max:50,message:"Username must be 3-50 characters"}],children:s.jsx(D,{prefix:s.jsx(re,{}),placeholder:"Username",disabled:!!a})}),s.jsx(k.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter valid email"}],children:s.jsx(D,{prefix:s.jsx(rs,{}),placeholder:"Email"})}),s.jsx(k.Item,{name:"full_name",label:"Full Name",children:s.jsx(D,{placeholder:"Full Name (optional)"})}),!a&&s.jsx(k.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter password"},{min:6,message:"Password must be at least 6 characters"}],children:s.jsx(D.Password,{prefix:s.jsx(pe,{}),placeholder:"Password"})}),s.jsx(k.Item,{name:"is_admin",label:"Role",valuePropName:"checked",children:s.jsx(V,{checkedChildren:"Admin",unCheckedChildren:"User"})}),a&&s.jsx(k.Item,{name:"is_active",label:"Status",valuePropName:"checked",children:s.jsx(V,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})]})})]})},{Search:Io}=D,{RangePicker:ia}=as,To=()=>{const e=fe(),[t,r]=_.useState([]),[n,o]=_.useState(!0),[i,a]=_.useState(""),[l,p]=_.useState("all"),[u,d]=_.useState("all");_.useEffect(()=>{h()},[]);const h=async()=>{o(!0);try{const m=[{id:1,node_name:"prod-server-01",process_name:"web-app",alert_type:"process_stopped",severity:"critical",message:"Process web-app has stopped unexpectedly",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:2,node_name:"prod-server-02",process_name:"worker",alert_type:"high_memory",severity:"warning",message:"Memory usage exceeded 80%",status:"acknowledged",created_at:new Date(Date.now()-36e5).toISOString(),updated_at:new Date().toISOString(),acknowledged_by:"admin"},{id:3,node_name:"staging-server",process_name:"api",alert_type:"process_restart",severity:"info",message:"Process restarted successfully",status:"resolved",created_at:new Date(Date.now()-72e5).toISOString(),updated_at:new Date(Date.now()-36e5).toISOString(),resolved_at:new Date(Date.now()-36e5).toISOString()}];r(m)}catch(m){console.error("Failed to load alerts:",m),I.error("Failed to load alerts")}finally{o(!1)}},w=m=>{switch(m){case"critical":return"red";case"error":return"orange";case"warning":return"gold";case"info":return"blue";default:return"default"}},R=m=>{switch(m){case"critical":return s.jsx(ye,{});case"error":return s.jsx(ye,{});case"warning":return s.jsx(Et,{});case"info":return s.jsx(ct,{});default:return s.jsx(ct,{})}},f=m=>{switch(m){case"active":return"error";case"acknowledged":return"warning";case"resolved":return"success";default:return"default"}},x=m=>{I.success(`Alert ${m} acknowledged`),h()},g=m=>{I.success(`Alert ${m} resolved`),h()},P=t.filter(m=>{const j=m.node_name.toLowerCase().includes(i.toLowerCase())||m.process_name.toLowerCase().includes(i.toLowerCase())||m.message.toLowerCase().includes(i.toLowerCase()),b=l==="all"||m.severity===l,A=u==="all"||m.status===u;return j&&b&&A}),v=[{title:"Severity",dataIndex:"severity",key:"severity",width:120,render:m=>s.jsx(F,{icon:R(m),color:w(m),children:m.toUpperCase()})},{title:"Node",dataIndex:"node_name",key:"node_name",width:150},{title:"Process",dataIndex:"process_name",key:"process_name",width:150},{title:"Type",dataIndex:"alert_type",key:"alert_type",width:150,render:m=>m.replace(/_/g," ").toUpperCase()},{title:"Message",dataIndex:"message",key:"message",ellipsis:!0},{title:"Status",dataIndex:"status",key:"status",width:120,render:m=>s.jsx(F,{color:f(m),children:m.toUpperCase()})},{title:"Created",dataIndex:"created_at",key:"created_at",width:180,render:m=>new Date(m).toLocaleString()},{title:"Actions",key:"actions",width:200,render:(m,j)=>s.jsxs(N,{children:[j.status==="active"&&s.jsx(T,{size:"small",onClick:()=>x(j.id),children:"Acknowledge"}),j.status!=="resolved"&&s.jsx(T,{size:"small",type:"primary",onClick:()=>g(j.id),children:"Resolve"})]})}],C=t.filter(m=>m.status==="active").length,y=t.filter(m=>m.status==="acknowledged").length,S=t.filter(m=>m.status==="resolved").length;return s.jsxs("div",{children:[s.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs(N,{children:[s.jsx("h1",{style:{margin:0},children:"Alerts"}),s.jsx(Qt,{count:C,style:{backgroundColor:"#ff4d4f"}})]}),s.jsxs(N,{children:[s.jsx(T,{onClick:()=>e("/alerts/rules"),children:"Alert Rules"}),s.jsx(T,{type:"primary",icon:s.jsx(de,{}),onClick:h,loading:n,children:"Refresh"})]})]}),s.jsxs(N,{style:{marginBottom:16,width:"100%"},size:"large",children:[s.jsx(O,{size:"small",children:s.jsxs(N,{children:[s.jsx(ye,{style:{fontSize:24,color:"#ff4d4f"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:12,color:"#666"},children:"Active"}),s.jsx("div",{style:{fontSize:20,fontWeight:"bold"},children:C})]})]})}),s.jsx(O,{size:"small",children:s.jsxs(N,{children:[s.jsx(Et,{style:{fontSize:24,color:"#faad14"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:12,color:"#666"},children:"Acknowledged"}),s.jsx("div",{style:{fontSize:20,fontWeight:"bold"},children:y})]})]})}),s.jsx(O,{size:"small",children:s.jsxs(N,{children:[s.jsx(ge,{style:{fontSize:24,color:"#52c41a"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:12,color:"#666"},children:"Resolved"}),s.jsx("div",{style:{fontSize:20,fontWeight:"bold"},children:S})]})]})})]}),s.jsx(O,{style:{marginBottom:16},children:s.jsxs(N,{wrap:!0,children:[s.jsx(Io,{placeholder:"Search alerts...",allowClear:!0,style:{width:300},onChange:m=>a(m.target.value),prefix:s.jsx(is,{})}),s.jsx(ne,{style:{width:150},value:l,onChange:p,options:[{label:"All Severities",value:"all"},{label:"Critical",value:"critical"},{label:"Error",value:"error"},{label:"Warning",value:"warning"},{label:"Info",value:"info"}]}),s.jsx(ne,{style:{width:150},value:u,onChange:d,options:[{label:"All Status",value:"all"},{label:"Active",value:"active"},{label:"Acknowledged",value:"acknowledged"},{label:"Resolved",value:"resolved"}]})]})}),s.jsx(O,{children:s.jsx(ce,{columns:v,dataSource:P,rowKey:"id",loading:n,pagination:{pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:(m,j)=>`${j[0]}-${j[1]} of ${m} alerts`},scroll:{x:1200}})})]})},Oo=()=>{const e=fe(),[t,r]=_.useState([]),[n,o]=_.useState(!0),[i,a]=_.useState(!1),[l,p]=_.useState(null),[u]=k.useForm();_.useEffect(()=>{d()},[]);const d=async()=>{o(!0);try{const v=[{id:1,name:"Process Stopped",description:"Alert when a process stops unexpectedly",condition_type:"process_state",threshold:0,severity:"critical",enabled:!0,notification_channels:["email","slack"],created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:2,name:"High Memory Usage",description:"Alert when memory usage exceeds threshold",condition_type:"memory_usage",threshold:80,severity:"warning",enabled:!0,notification_channels:["email"],created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:3,name:"High CPU Usage",description:"Alert when CPU usage exceeds threshold",condition_type:"cpu_usage",threshold:90,severity:"error",enabled:!1,notification_channels:["slack"],created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];r(v)}catch(v){console.error("Failed to load rules:",v),I.error("Failed to load alert rules")}finally{o(!1)}},h=()=>{p(null),u.resetFields(),a(!0)},w=v=>{p(v),u.setFieldsValue(v),a(!0)},R=async v=>{try{I.success("Alert rule deleted"),d()}catch{I.error("Failed to delete alert rule")}},f=async(v,C)=>{try{I.success(`Alert rule ${C?"enabled":"disabled"}`),d()}catch{I.error("Failed to update alert rule")}},x=async()=>{try{const v=await u.validateFields();l?I.success("Alert rule updated"):I.success("Alert rule created"),a(!1),d()}catch(v){console.error("Validation failed:",v)}},g=v=>{switch(v){case"critical":return"red";case"error":return"orange";case"warning":return"gold";case"info":return"blue";default:return"default"}},P=[{title:"Name",dataIndex:"name",key:"name",render:v=>s.jsx("strong",{children:v})},{title:"Description",dataIndex:"description",key:"description",ellipsis:!0},{title:"Condition",dataIndex:"condition_type",key:"condition_type",render:v=>v.replace(/_/g," ").toUpperCase()},{title:"Threshold",dataIndex:"threshold",key:"threshold",render:(v,C)=>C.condition_type==="process_state"?"-":`${v}%`},{title:"Severity",dataIndex:"severity",key:"severity",render:v=>s.jsx(F,{color:g(v),children:v.toUpperCase()})},{title:"Channels",dataIndex:"notification_channels",key:"notification_channels",render:v=>s.jsx(N,{children:v.map(C=>s.jsx(F,{children:C},C))})},{title:"Status",dataIndex:"enabled",key:"enabled",render:(v,C)=>s.jsx(V,{checked:v,onChange:y=>f(C.id,y)})},{title:"Actions",key:"actions",render:(v,C)=>s.jsxs(N,{children:[s.jsx(T,{size:"small",icon:s.jsx(ns,{}),onClick:()=>w(C),children:"Edit"}),s.jsx(yt,{title:"Delete this rule?",onConfirm:()=>R(C.id),okText:"Yes",cancelText:"No",children:s.jsx(T,{size:"small",icon:s.jsx(os,{}),danger:!0,children:"Delete"})})]})}];return s.jsxs("div",{children:[s.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("h1",{style:{margin:0},children:"Alert Rules"}),s.jsxs(N,{children:[s.jsx(T,{onClick:()=>e("/alerts"),children:"Back to Alerts"}),s.jsx(T,{type:"primary",icon:s.jsx(ss,{}),onClick:h,children:"Create Rule"}),s.jsx(T,{icon:s.jsx(de,{}),onClick:d,loading:n,children:"Refresh"})]})]}),s.jsx(O,{children:s.jsx(ce,{columns:P,dataSource:t,rowKey:"id",loading:n,pagination:{pageSize:10,showSizeChanger:!0,showTotal:v=>`Total ${v} rules`}})}),s.jsx(pt,{title:l?"Edit Alert Rule":"Create Alert Rule",open:i,onOk:x,onCancel:()=>a(!1),width:600,children:s.jsxs(k,{form:u,layout:"vertical",initialValues:{enabled:!0,severity:"warning",notification_channels:["email"]},children:[s.jsx(k.Item,{name:"name",label:"Rule Name",rules:[{required:!0,message:"Please enter rule name"}],children:s.jsx(D,{placeholder:"e.g., High Memory Usage"})}),s.jsx(k.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please enter description"}],children:s.jsx(D.TextArea,{rows:3,placeholder:"Describe when this alert should trigger"})}),s.jsx(k.Item,{name:"condition_type",label:"Condition Type",rules:[{required:!0,message:"Please select condition type"}],children:s.jsx(ne,{options:[{label:"Process State",value:"process_state"},{label:"CPU Usage",value:"cpu_usage"},{label:"Memory Usage",value:"memory_usage"},{label:"Disk Usage",value:"disk_usage"},{label:"Process Restart",value:"process_restart"}]})}),s.jsx(k.Item,{name:"threshold",label:"Threshold (%)",rules:[{required:!0,message:"Please enter threshold"}],children:s.jsx(Oe,{min:0,max:100,style:{width:"100%"}})}),s.jsx(k.Item,{name:"severity",label:"Severity",rules:[{required:!0,message:"Please select severity"}],children:s.jsx(ne,{options:[{label:"Info",value:"info"},{label:"Warning",value:"warning"},{label:"Error",value:"error"},{label:"Critical",value:"critical"}]})}),s.jsx(k.Item,{name:"notification_channels",label:"Notification Channels",rules:[{required:!0,message:"Please select at least one channel"}],children:s.jsx(ne,{mode:"multiple",options:[{label:"Email",value:"email"},{label:"Slack",value:"slack"},{label:"Webhook",value:"webhook"},{label:"SMS",value:"sms"}]})}),s.jsx(k.Item,{name:"enabled",label:"Enabled",valuePropName:"checked",children:s.jsx(V,{})})]})})]})},{RangePicker:No}=as,{TextArea:la}=D,Lo=()=>{const[e,t]=_.useState([]),[r,n]=_.useState([]),[o,i]=_.useState(!0),[a,l]=_.useState(""),[p,u]=_.useState("all"),[d,h]=_.useState("all");_.useEffect(()=>{w()},[]);const w=async()=>{i(!0);try{const y=[{id:1,timestamp:new Date().toISOString(),level:"info",source:"system",message:"System started successfully"},{id:2,timestamp:new Date(Date.now()-6e4).toISOString(),level:"warning",source:"node",message:"Node connection timeout, retrying...",node_name:"prod-server-01"},{id:3,timestamp:new Date(Date.now()-12e4).toISOString(),level:"error",source:"process",message:"Process crashed with exit code 1",node_name:"prod-server-02",process_name:"web-app"},{id:4,timestamp:new Date(Date.now()-18e4).toISOString(),level:"info",source:"auth",message:"User logged in successfully",user:"admin"}],S=[{id:1,timestamp:new Date().toISOString(),user:"admin",action:"start_process",resource_type:"process",resource_name:"web-app",details:"Started process on prod-server-01",ip_address:"192.168.1.100"},{id:2,timestamp:new Date(Date.now()-6e4).toISOString(),user:"john_doe",action:"stop_process",resource_type:"process",resource_name:"worker",details:"Stopped process on prod-server-02",ip_address:"192.168.1.101"},{id:3,timestamp:new Date(Date.now()-12e4).toISOString(),user:"admin",action:"create_user",resource_type:"user",resource_name:"jane_smith",details:"Created new user account",ip_address:"192.168.1.100"}];t(y),n(S)}catch(y){console.error("Failed to load logs:",y),I.error("Failed to load logs")}finally{i(!1)}},R=()=>{I.success("Logs exported successfully")},f=y=>{switch(y){case"error":return"red";case"warning":return"orange";case"info":return"blue";case"debug":return"default";default:return"default"}},x=y=>y.includes("create")?"green":y.includes("delete")?"red":y.includes("update")||y.includes("edit")?"orange":y.includes("start")?"blue":y.includes("stop")?"volcano":"default",g=[{title:"Timestamp",dataIndex:"timestamp",key:"timestamp",width:180,render:y=>new Date(y).toLocaleString(),sorter:(y,S)=>new Date(y.timestamp).getTime()-new Date(S.timestamp).getTime()},{title:"Level",dataIndex:"level",key:"level",width:100,render:y=>s.jsx(F,{color:f(y),children:y.toUpperCase()})},{title:"Source",dataIndex:"source",key:"source",width:120},{title:"Node",dataIndex:"node_name",key:"node_name",width:150,render:y=>y||"-"},{title:"Process",dataIndex:"process_name",key:"process_name",width:150,render:y=>y||"-"},{title:"Message",dataIndex:"message",key:"message",ellipsis:!0}],P=[{title:"Timestamp",dataIndex:"timestamp",key:"timestamp",width:180,render:y=>new Date(y).toLocaleString(),sorter:(y,S)=>new Date(y.timestamp).getTime()-new Date(S.timestamp).getTime()},{title:"User",dataIndex:"user",key:"user",width:120},{title:"Action",dataIndex:"action",key:"action",width:150,render:y=>s.jsx(F,{color:x(y),children:y.replace(/_/g," ").toUpperCase()})},{title:"Resource Type",dataIndex:"resource_type",key:"resource_type",width:120},{title:"Resource Name",dataIndex:"resource_name",key:"resource_name",width:150},{title:"Details",dataIndex:"details",key:"details",ellipsis:!0},{title:"IP Address",dataIndex:"ip_address",key:"ip_address",width:140}],v=e.filter(y=>{var b,A;const S=y.message.toLowerCase().includes(a.toLowerCase())||y.source.toLowerCase().includes(a.toLowerCase())||((b=y.node_name)==null?void 0:b.toLowerCase().includes(a.toLowerCase()))||((A=y.process_name)==null?void 0:A.toLowerCase().includes(a.toLowerCase())),m=p==="all"||y.level===p,j=d==="all"||y.source===d;return S&&m&&j}),C=r.filter(y=>y.user.toLowerCase().includes(a.toLowerCase())||y.action.toLowerCase().includes(a.toLowerCase())||y.resource_name.toLowerCase().includes(a.toLowerCase())||y.details.toLowerCase().includes(a.toLowerCase()));return s.jsxs("div",{children:[s.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("h1",{style:{margin:0},children:"Logs"}),s.jsxs(N,{children:[s.jsx(T,{icon:s.jsx(tr,{}),onClick:R,children:"Export"}),s.jsx(T,{type:"primary",icon:s.jsx(de,{}),onClick:w,loading:o,children:"Refresh"})]})]}),s.jsx(O,{style:{marginBottom:16},children:s.jsxs(N,{wrap:!0,style:{width:"100%"},children:[s.jsx(D,{placeholder:"Search logs...",prefix:s.jsx(is,{}),style:{width:300},value:a,onChange:y=>l(y.target.value),allowClear:!0}),s.jsx(ne,{style:{width:150},value:p,onChange:u,options:[{label:"All Levels",value:"all"},{label:"Debug",value:"debug"},{label:"Info",value:"info"},{label:"Warning",value:"warning"},{label:"Error",value:"error"}]}),s.jsx(ne,{style:{width:150},value:d,onChange:h,options:[{label:"All Sources",value:"all"},{label:"System",value:"system"},{label:"Node",value:"node"},{label:"Process",value:"process"},{label:"Auth",value:"auth"}]}),s.jsx(No,{showTime:!0,format:"YYYY-MM-DD HH:mm",placeholder:["Start Time","End Time"]})]})}),s.jsx(O,{children:s.jsx(ze,{items:[{key:"system",label:`System Logs (${v.length})`,children:s.jsx(ce,{columns:g,dataSource:v,rowKey:"id",loading:o,pagination:{pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:(y,S)=>`${S[0]}-${S[1]} of ${y} logs`},scroll:{x:1e3},size:"small"})},{key:"activity",label:`Activity Logs (${C.length})`,children:s.jsx(ce,{columns:P,dataSource:C,rowKey:"id",loading:o,pagination:{pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:(y,S)=>`${S[0]}-${S[1]} of ${y} logs`},scroll:{x:1e3},size:"small"})}]})})]})},$o=()=>{const{user:e}=he(),[t,r]=_.useState(!1),[n]=k.useForm(),[o]=k.useForm(),[i]=k.useForm(),[a]=k.useForm(),l=async()=>{try{const h=await n.validateFields();r(!0),await new Promise(w=>setTimeout(w,1e3)),I.success("Profile updated successfully")}catch(h){console.error("Failed to update profile:",h)}finally{r(!1)}},p=async()=>{try{const h=await o.validateFields();r(!0),await new Promise(w=>setTimeout(w,1e3)),I.success("Password changed successfully"),o.resetFields()}catch(h){console.error("Failed to change password:",h)}finally{r(!1)}},u=async()=>{try{const h=await i.validateFields();r(!0),await new Promise(w=>setTimeout(w,1e3)),I.success("Notification settings updated")}catch(h){console.error("Failed to update notification settings:",h)}finally{r(!1)}},d=async()=>{try{const h=await a.validateFields();r(!0),await new Promise(w=>setTimeout(w,1e3)),I.success("System settings updated")}catch(h){console.error("Failed to update system settings:",h)}finally{r(!1)}};return s.jsxs("div",{children:[s.jsx("h1",{style:{marginBottom:16},children:"Settings"}),s.jsx(O,{children:s.jsx(ze,{items:[{key:"profile",label:s.jsxs("span",{children:[s.jsx(re,{}),"Profile"]}),children:s.jsxs("div",{style:{maxWidth:600},children:[s.jsx(be,{message:"Profile Information",description:"Update your personal information and preferences",type:"info",showIcon:!0,style:{marginBottom:24}}),s.jsxs(k,{form:n,layout:"vertical",initialValues:{username:(e==null?void 0:e.username)||"",email:(e==null?void 0:e.email)||"",full_name:"",timezone:"UTC"},children:[s.jsx(k.Item,{name:"username",label:"Username",children:s.jsx(D,{prefix:s.jsx(re,{}),disabled:!0})}),s.jsx(k.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter valid email"}],children:s.jsx(D,{prefix:s.jsx(rs,{}),placeholder:"Enter email"})}),s.jsx(k.Item,{name:"full_name",label:"Full Name",children:s.jsx(D,{placeholder:"Enter full name"})}),s.jsx(k.Item,{name:"timezone",label:"Timezone",children:s.jsx(ne,{options:[{label:"UTC",value:"UTC"},{label:"America/New_York",value:"America/New_York"},{label:"America/Los_Angeles",value:"America/Los_Angeles"},{label:"Europe/London",value:"Europe/London"},{label:"Asia/Shanghai",value:"Asia/Shanghai"},{label:"Asia/Tokyo",value:"Asia/Tokyo"}]})}),s.jsx(k.Item,{children:s.jsx(T,{type:"primary",icon:s.jsx(Ie,{}),onClick:l,loading:t,children:"Save Changes"})})]})]})},{key:"security",label:s.jsxs("span",{children:[s.jsx(pe,{}),"Security"]}),children:s.jsxs("div",{style:{maxWidth:600},children:[s.jsx(be,{message:"Change Password",description:"Ensure your password is strong and secure",type:"warning",showIcon:!0,style:{marginBottom:24}}),s.jsxs(k,{form:o,layout:"vertical",children:[s.jsx(k.Item,{name:"current_password",label:"Current Password",rules:[{required:!0,message:"Please enter current password"}],children:s.jsx(D.Password,{prefix:s.jsx(pe,{}),placeholder:"Enter current password"})}),s.jsx(k.Item,{name:"new_password",label:"New Password",rules:[{required:!0,message:"Please enter new password"},{min:6,message:"Password must be at least 6 characters"}],children:s.jsx(D.Password,{prefix:s.jsx(pe,{}),placeholder:"Enter new password"})}),s.jsx(k.Item,{name:"confirm_password",label:"Confirm Password",dependencies:["new_password"],rules:[{required:!0,message:"Please confirm password"},({getFieldValue:h})=>({validator(w,R){return!R||h("new_password")===R?Promise.resolve():Promise.reject(new Error("Passwords do not match"))}})],children:s.jsx(D.Password,{prefix:s.jsx(pe,{}),placeholder:"Confirm new password"})}),s.jsx(k.Item,{children:s.jsx(T,{type:"primary",icon:s.jsx(Ie,{}),onClick:p,loading:t,children:"Change Password"})})]})]})},{key:"notifications",label:s.jsxs("span",{children:[s.jsx(Fe,{}),"Notifications"]}),children:s.jsxs("div",{style:{maxWidth:600},children:[s.jsx(be,{message:"Notification Preferences",description:"Configure how you want to receive notifications",type:"info",showIcon:!0,style:{marginBottom:24}}),s.jsxs(k,{form:i,layout:"vertical",initialValues:{email_notifications:!0,process_alerts:!0,system_alerts:!0,weekly_report:!1},children:[s.jsx(k.Item,{name:"email_notifications",label:"Email Notifications",valuePropName:"checked",children:s.jsx(V,{})}),s.jsx(st,{}),s.jsx(k.Item,{name:"process_alerts",label:"Process Alerts",valuePropName:"checked",children:s.jsx(V,{})}),s.jsx(k.Item,{name:"system_alerts",label:"System Alerts",valuePropName:"checked",children:s.jsx(V,{})}),s.jsx(k.Item,{name:"node_status_changes",label:"Node Status Changes",valuePropName:"checked",children:s.jsx(V,{})}),s.jsx(st,{}),s.jsx(k.Item,{name:"weekly_report",label:"Weekly Summary Report",valuePropName:"checked",children:s.jsx(V,{})}),s.jsx(k.Item,{children:s.jsx(T,{type:"primary",icon:s.jsx(Ie,{}),onClick:u,loading:t,children:"Save Preferences"})})]})]})},{key:"system",label:s.jsxs("span",{children:[s.jsx(it,{}),"System"]}),children:(e==null?void 0:e.role)==="admin"?s.jsxs("div",{style:{maxWidth:600},children:[s.jsx(be,{message:"System Configuration",description:"Configure global system settings (Admin only)",type:"warning",showIcon:!0,style:{marginBottom:24}}),s.jsxs(k,{form:a,layout:"vertical",initialValues:{refresh_interval:30,log_retention_days:30,max_concurrent_connections:100,enable_websocket:!0,enable_activity_logging:!0},children:[s.jsx(k.Item,{name:"refresh_interval",label:"Refresh Interval (seconds)",rules:[{required:!0}],children:s.jsx(Oe,{min:5,max:300,style:{width:"100%"}})}),s.jsx(k.Item,{name:"log_retention_days",label:"Log Retention (days)",rules:[{required:!0}],children:s.jsx(Oe,{min:1,max:365,style:{width:"100%"}})}),s.jsx(k.Item,{name:"max_concurrent_connections",label:"Max Concurrent Connections",rules:[{required:!0}],children:s.jsx(Oe,{min:10,max:1e3,style:{width:"100%"}})}),s.jsx(st,{}),s.jsx(k.Item,{name:"enable_websocket",label:"Enable WebSocket",valuePropName:"checked",children:s.jsx(V,{})}),s.jsx(k.Item,{name:"enable_activity_logging",label:"Enable Activity Logging",valuePropName:"checked",children:s.jsx(V,{})}),s.jsx(k.Item,{children:s.jsxs(N,{children:[s.jsx(T,{type:"primary",icon:s.jsx(Ie,{}),onClick:d,loading:t,children:"Save Settings"}),s.jsx(T,{icon:s.jsx(sr,{}),onClick:()=>I.info("Database backup started"),children:"Backup Database"})]})})]})]}):s.jsx(be,{message:"Access Denied",description:"Only administrators can access system settings",type:"error",showIcon:!0})}]})})]})};function Do({children:e}){const{isAuthenticated:t}=he();return t?s.jsx(s.Fragment,{children:e}):s.jsx(Ne,{to:"/login",replace:!0})}function Fo(){const{isAuthenticated:e,setUser:t}=he();_.useEffect(()=>{e&&r()},[e]);const r=async()=>{try{const n=await Us.getCurrentUser();n.data&&t(n.data)}catch(n){console.error("Failed to load user info:",n)}};return s.jsxs(lr,{children:[s.jsx(W,{path:"/login",element:s.jsx(Co,{})}),s.jsxs(W,{path:"/",element:s.jsx(Do,{children:s.jsx(_o,{})}),children:[s.jsx(W,{index:!0,element:s.jsx(Ne,{to:"/dashboard",replace:!0})}),s.jsx(W,{path:"dashboard",element:s.jsx(ko,{})}),s.jsx(W,{path:"nodes",element:s.jsx(Ro,{})}),s.jsx(W,{path:"nodes/:nodeName",element:s.jsx(Ao,{})}),s.jsx(W,{path:"users",element:s.jsx(Po,{})}),s.jsx(W,{path:"alerts",element:s.jsx(To,{})}),s.jsx(W,{path:"alerts/rules",element:s.jsx(Oo,{})}),s.jsx(W,{path:"logs",element:s.jsx(Lo,{})}),s.jsx(W,{path:"settings",element:s.jsx($o,{})})]}),s.jsx(W,{path:"*",element:e?s.jsx(Ne,{to:"/dashboard",replace:!0}):s.jsx(Ne,{to:"/login",replace:!0})})]})}dt.createRoot(document.getElementById("root")).render(s.jsx(cs.StrictMode,{children:s.jsx(cr,{children:s.jsx(rr,{locale:Cr,children:s.jsx(Fo,{})})})}));
